<div class="min-h-screen flex items-center justify-center bg-[#121212]">
  <div class="flex flex-col items-center w-[420px] p-8 bg-[#1E1E1E] rounded-4xl gap-6">
    <h1 class="text-4xl font-bold text-white mb-2">Registro</h1>

    <form id="register-form" class="w-full space-y-5">
      <div class="flex flex-col gap-2">
        <label for="reg-username" class="text-white text-lg font-semibold">Usuario</label>
        <input
          type="text"
          id="reg-username"
          class="w-full px-4 py-2 rounded-xl bg-[#181818] text-white border border-[#2E2E2E] focus:border-[#00BFA6] focus:outline-none"
          placeholder="Nombre de usuario"
        />
      </div>

      <div class="flex flex-col gap-2">
        <label for="reg-password" class="text-white text-lg font-semibold">Contraseña</label>
        <input
          type="password"
          id="reg-password"
          class="w-full px-4 py-2 rounded-xl bg-[#181818] text-white border border-[#2E2E2E] focus:border-[#00BFA6] focus:outline-none"
          placeholder="Crea una contraseña"
        />
      </div>

      <div class="flex flex-col gap-2">
        <label for="reg-password-confirm" class="text-white text-lg font-semibold">Confirmar contraseña</label>
        <input
          type="password"
          id="reg-password-confirm"
          class="w-full px-4 py-2 rounded-xl bg-[#181818] text-white border border-[#2E2E2E] focus:border-[#00BFA6] focus:outline-none"
          placeholder="Repite la contraseña"
        />
      </div>

      <div class="flex flex-col gap-2">
        <label for="reg-phone" class="text-white text-lg font-semibold">Numero de Telefono</label>
        <input
          type="text"
          id="reg-phone"
          class="w-full px-4 py-2 rounded-xl bg-[#181818] text-white border border-[#2E2E2E] focus:border-[#00BFA6] focus:outline-none"
          placeholder="Numero de telefono"
        />
      </div>

      <button
        type="submit"
        id="register-button"
        class="w-full bg-[#00BFA6] hover:bg-[#00997A] text-white text-xl font-semibold py-2 rounded-xl transition-colors"
      >
        Crear Cuenta
      </button>
    </form>

    <div class="flex flex-col items-center gap-3 mt-2">
      <div class="text-white text-sm">
        ¿Ya tienes cuenta?
        <a href="/login" class="text-[#00BFA6] hover:text-[#00997A] font-semibold">Inicia Sesión</a>
      </div>
    </div>
  </div>
</div>

<script>
  const registerForm = document.getElementById('register-form');
  const numTelefonos = [722134866, 645549062];


  registerForm?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const username = document.getElementById('reg-username');
    const password = document.getElementById('reg-password');
    const passwordConfirm = document.getElementById('reg-password-confirm');
    const phone = document.getElementById('reg-phone');

    const usernameValue = username instanceof HTMLInputElement ? username.value.trim() : "";
    const passwordValue = password instanceof HTMLInputElement ? password.value : ""; 
    const passwordConfirmValue = passwordConfirm instanceof HTMLInputElement ? passwordConfirm.value : "";
    const phoneValue = phone instanceof HTMLInputElement ? phone.value.trim() : "";

    if (passwordValue !== passwordConfirmValue) {
      alert('Las contraseñas no coinciden.');
      return;
    }
    if (!numTelefonos.includes(parseInt(phoneValue))) {
      alert('Este numero de telefono no esta registrado en nuestra base de datos.');
      return;
    }

    const response = await fetch('/apis/register', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ username: usernameValue, password: passwordValue, phone: phoneValue }),
    });

    const result = await response.json();

    if (response.ok) {
      alert('Registro exitoso. Redirigiendo al inicio de sesión.');
      window.location.href = '/login';
    } else {
      alert(`Error en el registro: ${result.message}`);
    }
  });
</script>