---
---
<div class="min-h-screen flex items-center justify-center bg-[#121212]">
    <div class="flex flex-col items-center w-[400px] p-8 bg-[#1E1E1E] rounded-4xl gap-6">
        <h1 class="text-4xl font-bold text-white mb-6">Login</h1>
        
        <form class="w-full space-y-6">
            <div class="flex flex-col gap-2">
                <label for="username" class="text-white text-lg font-semibold">Usuario</label>
                <input 
                    type="text" 
                    id="username" 
                    class="w-full px-4 py-2 rounded-xl bg-[#181818] text-white border border-[#2E2E2E] focus:border-[#00BFA6] focus:outline-none"
                    placeholder="Ingresa tu usuario"
                />
            </div>
            
            <div class="flex flex-col gap-2">
                <label for="password" class="text-white text-lg font-semibold">Contraseña</label>
                <input 
                    type="password" 
                    id="password" 
                    class="w-full px-4 py-2 rounded-xl bg-[#181818] text-white border border-[#2E2E2E] focus:border-[#00BFA6] focus:outline-none"
                    placeholder="Ingresa tu contraseña"
                />
            </div>

            <button 
                type="submit" 
                id="submit-button"
                class="w-full bg-[#00BFA6] hover:bg-[#00997A] text-white text-xl font-semibold py-2 rounded-xl transition-colors"
            >
                Iniciar Sesión
            </button>
        </form>

        <div class="flex flex-col items-center gap-4 mt-4">
            <div class="text-white text-sm">
                ¿Eres peruanito y no tienes cuenta? 
                <a href="/register" class="text-[#00BFA6] hover:text-[#00997A] font-semibold">Regístrate</a>
            </div>
        </div>
    </div>
</div>

<script>
    const submitButton = document.getElementById("submit-button");

    submitButton?.addEventListener("click", async (e) => {
        e.preventDefault();

        const usernameEl = document.getElementById("username");
        const passwordEl = document.getElementById("password");

        // document.getElementById devuelve HTMLElement | null, que no tiene .value
        // comprobamos en tiempo de ejecución que sean inputs antes de usar .value
        const username = usernameEl instanceof HTMLInputElement ? usernameEl.value.trim() : "";
        const password = passwordEl instanceof HTMLInputElement ? passwordEl.value : "";

        if (!username || !password) {
            alert('Por favor completa todos los campos.');
            return;
        }
        
        const response = await fetch('/apis/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ username, password }),
        });

        if (response.ok) {
            // Redirect to dashboard or home page upon successful login
            window.location.href = '/';
        } else {
            alert('Error al iniciar sesión. Por favor, verifica tus credenciales.');
        }
    });
</script>